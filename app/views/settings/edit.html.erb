<div class="max-w-2xl mx-auto">
  <div class="mb-8">
    <h1 class="text-2xl font-display font-bold text-neutral-900">Settings</h1>
    <p class="text-neutral-500 mt-1">Configure your Foresight preferences</p>
  </div>

  <%# Settings Form Card %>
  <div class="card p-8 mb-8">
    <h2 class="text-lg font-display font-semibold text-neutral-900 mb-6 flex items-center gap-2">
      <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
      </svg>
      Display Settings
    </h2>

    <%= form_with model: @settings, url: settings_path, method: :patch, class: "space-y-6" do |f| %>
      <% if @settings.errors.any? %>
        <div class="alert-danger">
          <svg class="w-5 h-5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
          </svg>
          <div class="flex-1">
            <h3 class="font-semibold mb-1">Please fix the following errors:</h3>
            <ul class="space-y-0.5 text-sm">
              <% @settings.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        </div>
      <% end %>

      <div>
        <label class="form-label">Default View Period</label>
        <%= f.select :default_view_months, [
          ["1 month", 1],
          ["3 months", 3],
          ["6 months", 6]
        ], {}, class: "form-select" %>
        <p class="form-hint">Initial time range shown on the dashboard. You can always expand to see more.</p>
      </div>

      <div>
        <label class="form-label">Session Timeout</label>
        <%= f.select :session_timeout_minutes, [
          ["15 minutes", 15],
          ["30 minutes", 30],
          ["1 hour", 60],
          ["4 hours", 240],
          ["24 hours", 1440]
        ], {}, class: "form-select" %>
        <p class="form-hint">How long before inactive sessions are logged out automatically.</p>
      </div>

      <div class="flex justify-end pt-4 border-t border-neutral-200">
        <%= f.submit "Save Settings", class: "btn-primary cursor-pointer" %>
      </div>
    <% end %>
  </div>

  <%# Database Stats Card %>
  <div class="card p-8">
    <h2 class="text-lg font-display font-semibold text-neutral-900 mb-6 flex items-center gap-2">
      <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"/>
      </svg>
      Database Overview
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
      <div class="text-center p-4 bg-neutral-50 rounded-xl">
        <p class="text-3xl font-display font-bold text-neutral-900"><%= Account.count %></p>
        <p class="text-sm text-neutral-500 mt-1">Accounts</p>
      </div>
      <div class="text-center p-4 bg-neutral-50 rounded-xl">
        <p class="text-3xl font-display font-bold text-neutral-900"><%= RecurringRule.count %></p>
        <p class="text-sm text-neutral-500 mt-1">Recurring Rules</p>
      </div>
      <div class="text-center p-4 bg-neutral-50 rounded-xl">
        <p class="text-3xl font-display font-bold text-neutral-900"><%= Transaction.count %></p>
        <p class="text-sm text-neutral-500 mt-1">Transactions</p>
      </div>
    </div>
  </div>
</div>
