<%= form_with model: category_group, class: "space-y-6" do |f| %>
  <div class="card p-6 space-y-6">
    <%# Name %>
    <div>
      <%= f.label :name, class: "form-label" %>
      <%= f.text_field :name, class: "form-input", placeholder: "e.g., Bills & Utilities" %>
      <% if category_group.errors[:name].any? %>
        <p class="form-error"><%= category_group.errors[:name].join(", ") %></p>
      <% end %>
    </div>

    <%# Color Selection %>
    <div>
      <%= f.label :color, "Color", class: "form-label" %>
      <div class="grid grid-cols-4 gap-3 mt-2">
        <% CategoryGroup::COLORS.each do |color| %>
          <label class="cursor-pointer">
            <input type="radio" name="category_group[color]" value="<%= color %>" 
                   class="sr-only peer" <%= 'checked' if category_group.color == color || (category_group.color.blank? && color == 'teal') %>>
            <div class="flex items-center justify-center p-3 rounded-lg border-2 transition-all
                        peer-checked:border-primary-500 peer-checked:ring-2 peer-checked:ring-primary-200
                        border-neutral-200 hover:border-neutral-300">
              <span class="category-badge-<%= color %>"><%= color.titleize %></span>
            </div>
          </label>
        <% end %>
      </div>
      <% if category_group.errors[:color].any? %>
        <p class="form-error"><%= category_group.errors[:color].join(", ") %></p>
      <% end %>
    </div>
  </div>

  <%# Actions %>
  <div class="flex justify-end gap-3">
    <%= link_to "Cancel", category_groups_path, class: "btn-secondary" %>
    <%= f.submit category_group.persisted? ? "Save Changes" : "Create Group", class: "btn-primary cursor-pointer", data: { turbo_submits_with: "Saving..." } %>
  </div>
<% end %>
